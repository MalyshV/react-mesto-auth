{"version":3,"sources":["contexts/CurrentUserContext.js","images/LogoVector.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditAvatarPopup.js","components/ImagePopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/DeleteCardPoup.js","images/wright.svg","images/wrong.svg","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/api.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","Header","props","className","src","logo","alt","exact","path","email","to","onClick","handleSignOut","Card","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","link","name","onCardClick","type","onCardLike","length","onDeleteButtonClick","id","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlaceButtonClick","cards","map","card","Footer","today","Date","getFullYear","PopupWithForm","isOpen","onClose","title","action","onSubmit","children","textOnButton","EditAvatarPopup","avatarRef","useRef","e","preventDefault","onUpdateAvatar","current","value","ref","placeholder","defaultValue","tabIndex","required","ImagePopup","EditProfilePopup","useState","setName","description","setDescription","useEffect","onUpdateUser","onChange","target","minLength","maxLength","AddPlacePopup","nameRef","linkRef","onAddPlace","DeleteCardPopup","InfoTooltip","isRegistered","wrigth","wrong","Login","userEmail","setUserEmail","userPassword","setUserPassword","password","handleAuthorization","Register","handleRegistration","ProtectedRoute","Component","component","isLoggedIn","api","config","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","_checkRespons","data","body","JSON","stringify","cardId","res","ok","json","Promise","reject","status","authorization","BASE_URL","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectCard","setSelectCard","setCurrentUser","setCards","setIsLoggedIn","setIsRegistered","setEmail","history","useHistory","closeAllPopups","handleInfoTooltipOpen","all","getUserInfo","getInitialCards","userData","cardsData","catch","error","console","log","token","jwt","localStorage","getItem","push","Provider","removeItem","removeLike","setlike","newCard","state","c","removeCard","filter","response","err","auth","setItem","setUserAvatar","setUserInfo","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7a7a1703.chunk.js","sourcesContent":["import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","export default __webpack_public_path__ + \"static/media/LogoVector.18b2d300.svg\";","import React from 'react';\nimport logo from '../images/LogoVector.svg';\nimport { Switch, Route, Link } from 'react-router-dom';\n\nfunction Header(props) {\n  return(\n    <header className=\"header page__container\">\n        <img className=\"header__logo\" src={logo} alt=\"Логотип сервиса Mesto\"/>\n        <Switch>\n          <Route exact path=\"/\">\n            <div className=\"header__loggedIn\">\n              <p>{props.email}</p>  \n              <Link className=\"page__buttons\" to=\"/sign-in\" onClick={props.handleSignOut}>Выйти</Link>\n            </div>\n          </Route>\n          <Route path=\"/sign-up\">\n            <Link className=\"page__buttons\" to=\"/sign-in\">Войти</Link>\n          </Route>\n          <Route path=\"/sign-in\">\n            <Link className=\"page__buttons\" to=\"/sign-up\">Регистрация</Link>\n          </Route>\n        </Switch>\n    </header>\n  )\n}\n\nexport default Header;","import React, { useContext } from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props){\n  const currentUser = useContext(CurrentUserContext);\n  const isOwn = props.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n    `${isOwn ? 'element__delete-button' : 'element__delete-button_hidden'}`\n  );\n\n  const isLiked = props.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = `${isLiked? 'element__like-button_active' : 'element__like-button'}`;\n\n  function handleClick() {\n    props.onCardClick(props);\n  }\n\n  function handleDeletePlaceClick() {\n    props.onDeleteButtonClick(props);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props);\n  }\n\n  return(\n      <div key={props.id} className=\"element\">\n        <img className=\"element__image\" src={props.link} alt={props.name} onClick={handleClick} />\n        <div className=\"element__description\">\n          <h2 className=\"element__title\">{props.name}</h2>\n          <div className=\"element__like-area\">\n            <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick} />\n            <span className=\"element__like-counter\">{props.likes.length}</span>\n          </div>\n          <button className={cardDeleteButtonClassName} type=\"reset\" onClick={handleDeletePlaceClick} />\n        </div>\n      </div>\n  )\n}\n\nexport default Card;","import React, { useContext } from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Main(props) {\n  const currentUser = useContext(CurrentUserContext);\n\n  return(\n    <main className=\"content page__container\">\n      <section className=\"profile\">\n        <div className=\"profile__avatar\">\n          <button className=\"profile__icon page__buttons\" onClick={props.onEditAvatar}>\n            <img className=\"profile__image\" alt=\"фото пользователя\" src={currentUser.avatar} />\n          </button>\n          <div className=\"profile__info\">\n            <div className=\"profile__change\">\n              <h1 className=\"profile__user-name\">{currentUser.name}</h1>\n              <button className=\"profile__edit-button page__buttons\" type=\"button\" onClick={props.onEditProfile} />\n            </div>\n            <p className=\"profile__user-job\">{currentUser.about}</p>\n          </div>\n        </div>\n        <button className=\"profile__add-button page__buttons\" type=\"submit\" onClick={props.onAddPlaceButtonClick} />\n      </section>\n      <section className=\"elements\">\n        <div className=\"elements__list\">\n          {props.cards.map(card => {\n            return <Card key={card._id} {...card} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onDeleteButtonClick={props.onDeleteButtonClick}/>\n          })}\n        </div>\n      </section>\n    </main>\n  )\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n  let today = new Date();\n\n  return(\n    <footer className=\"footer page__container\">\n      <p className=\"footer__copyrigth\">&copy; {today.getFullYear()} Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport default Footer;","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n    <div className={`popup popup_type_${props.name} ${props.isOpen ? 'popup_is-opened' : ''}`}>\n      <div className=\"popup__content popup__content_theme_input\">\n        <button className=\"popup__close page__buttons\" type=\"button\" onClick={props.onClose} />\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form className=\"form\" action=\"#\" name={props.name} onSubmit={props.onSubmit}>\n          <fieldset className=\"input-container\">\n            {props.children}\n            <button type=\"submit\" className=\"input-container__button\">{props.textOnButton}</button>\n          </fieldset>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default PopupWithForm;","import React, { useRef } from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  } \n\n  return(\n    <PopupWithForm name=\"userPhotoForm\" title=\"Обновить аватар\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} textOnButton=\"Сохранить\">\n      <input id=\"url\" type=\"url\" ref={avatarRef} className=\"input-container__item\" name=\"avatar\" placeholder=\"Ссылка на фото\" defaultValue=\"\" tabIndex=\"1\" required />\n      <span className=\"input-container__input-error\" id=\"url-error\" />\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;","import React from 'react';\n\nfunction ImagePopup(props) {\n  return(\n    <div className={`popup ${props.card.link ? 'popup_is-opened' : ''}`} onClose={props.onClose}>\n      <div className=\"popup__content popup__content_theme_photo\">\n        <button className=\"popup__close page__buttons\" type=\"button\" onClick={props.onClose} />\n        <figure className=\"popup__figure\">\n          <img className=\"popup__image\" src={props.card.link} alt={props.card.name} />\n          <figcaption className=\"popup__text\">{props.card.name}</figcaption>\n        </figure>\n      </div>\n    </div>\n  )\n}\n\nexport default ImagePopup;\n","import React, { useState, useEffect, useContext } from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n  const [name, setName]  = useState('');\n  const [description, setDescription] = useState('');\n  const currentUser = useContext(CurrentUserContext);\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateUser({\n      name: name,\n      about: description,\n    });\n  }\n\n  return(\n    <PopupWithForm name=\"profileForm\" title=\"Редактировать профиль\" textOnButton=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n      <input id=\"username\" className=\"input-container__item\" value={name || ''} onChange={handleNameChange} type=\"text\" name=\"name\"  placeholder=\"Имя\" tabIndex=\"1\" minLength=\"2\" maxLength=\"40\" />\n      <span className=\"input-container__input-error\" id=\"username-error\" />\n      <input id=\"job\" className=\"input-container__item\" value={description || ''} onChange={handleDescriptionChange} type=\"text\" name=\"about\" placeholder=\"Профессия\" tabIndex=\"2\" minLength=\"2\" maxLength=\"200\" />\n      <span className=\"input-container__input-error\" id=\"job-error\" />\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup(props) {\n  const nameRef = React.useRef('');\n  const linkRef = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onAddPlace({\n      name: nameRef.current.value,\n      link: linkRef.current.value,\n    })\n  }\n\n\n  return(\n    <PopupWithForm name=\"cardForm\" title=\"Новое место\" isOpen={props.isOpen} onClose={props.onClose} textOnButton=\"Сохранить\" onSubmit={handleSubmit}>\n      <input id=\"placename\" className=\"input-container__item\" ref={nameRef} type=\"text\" name=\"name\" placeholder=\"Название\" defaultValue=\"\" tabIndex=\"1\" minLength=\"2\" maxLength=\"30\" required />\n      <span className=\"input-container__input-error\" id=\"placename-error\" />\n      <input id=\"urlcard\" type=\"url\" className=\"input-container__item\" ref={linkRef} name=\"link\" placeholder=\"Ссылка на картинку\" defaultValue=\"\" tabIndex=\"2\" required />\n      <span className=\"input-container__input-error\" id=\"urlcard-error\" />\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction DeleteCardPopup(props){\n\n  /*function handleSubmit(e) {\n    e.preventDefault();\n    props.onSubmit(props.card);\n    console.log('?????????');\n  }*/\n\n  return(\n    <PopupWithForm name=\"cardDeleteForm\" title=\"Вы уверены?\" isOpen={props.isOpen} onClose={props.onClose} textOnButton=\"Да\">\n    </PopupWithForm>\n  )\n\n  // Временно удалила onSubmit={handleSubmit};\n}\n\nexport default DeleteCardPopup;","export default __webpack_public_path__ + \"static/media/wright.f59cf213.svg\";","export default __webpack_public_path__ + \"static/media/wrong.ee87805b.svg\";","import React from 'react';\nimport wrigth from './../images/wright.svg';\nimport wrong from './../images/wrong.svg';\n\nfunction InfoTooltip(props) {\n  return(\n    <div className={`popup ${props.isOpen ? 'popup_is-opened' : ''}`}>\n      <div className=\"popup__content popup__content_theme_auth\">\n        <button className=\"popup__close page__buttons\" type=\"button\" onClick={props.onClose} />\n        <img className=\"popup__icon\" src={props.isRegistered ? wrigth : wrong} alt=\"статус регистрации\" />\n        <h2 className=\"popup__title popup__title_theme_auth\">{props.isRegistered ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте ещё раз.'}</h2>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoTooltip;","import React, { useState } from 'react';\n\nfunction Login(props) {\n\n  const [userEmail, setUserEmail] = useState('');\n  const [userPassword, setUserPassword] = useState('');\n\n  function handleChangeEmail(e) {\n    setUserEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setUserPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const email = userEmail;\n    const password = userPassword;\n    props.handleAuthorization(email, password);\n  }\n\n  return(\n    <div className=\"auth\">\n      <h1 className=\"auth__title\">Вход</h1>\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\n        <fieldset className=\"input-container\">\n          <input id=\"email\" className=\"input-container__item input-container__item_type_dark\" required name=\"username\" placeholder=\"Email\" type=\"email\" tabIndex=\"1\" onChange={handleChangeEmail} value={userEmail}/>\n          <span className=\"input-container__input-error\" id=\"email-error\" />\n          <input id=\"password\" className=\"input-container__item input-container__item_type_dark\" required name=\"password\" placeholder=\"Пароль\" type=\"password\" tabIndex=\"2\" onChange={handleChangePassword} value={userPassword}/>\n          <span className=\"input-container__input-error\" id=\"password-error\" />\n          <button type=\"submit\" className=\"input-container__button input-container__button_type_dark\">Войти</button>\n        </fieldset>\n      </form>\n  </div>\n  )\n}\n\nexport default Login;","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n\n  const [userEmail, setUserEmail] = useState('');\n  const [userPassword, setUserPassword] = useState('');\n\n  function handleChangeEmail(e) {\n    setUserEmail(e.target.value);\n  }\n\n  function handleChangePassword(e) {\n    setUserPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const email = userEmail;\n    const password = userPassword;\n\n    props.handleRegistration(email, password);\n  }\n\n  return(\n    <div className=\"auth\">\n      <h1 className=\"auth__title\">Регистрация</h1>\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\n        <fieldset className=\"input-container\">\n          <input className=\"input-container__item input-container__item_type_dark\" required id=\"userEmail\" name=\"username\" placeholder=\"Email\" type=\"email\" tabIndex=\"1\" onChange={handleChangeEmail} value={userEmail}/>\n          <span className=\"input-container__input-error\" id=\"userEmail-error\" />\n          <input className=\"input-container__item input-container__item_type_dark\" required id=\"userPassword\" name=\"password\" placeholder=\"Пароль\" type=\"password\" tabIndex=\"2\" onChange={handleChangePassword} value={userPassword}/>\n          <span className=\"input-container__input-error\" id=\"userPassword-error\" />\n          <button type=\"submit\" className=\"input-container__button input-container__button_type_dark\">Зарегистрироваться</button>\n        </fieldset>\n      </form>\n      <div className=\"auth__signup\">\n        <p>Уже зарегистрированы?</p>\n        <Link className=\"auth__link\" to=\"/sing-in\">Войти</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Register;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.isLoggedIn === true ? <Component {...props} /> : <Redirect to=\"/log-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;","class Api {\n  constructor(config) {\n    this._baseUrl = config.baseUrl;\n    this._headers = config.headers;\n  }\n\n  getUserInfo() {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'GET',\n      headers: this._headers,\n  })\n  .then(this._checkRespons);\n  }\n\n  setUserInfo(data) {\n    return fetch(`${this._baseUrl}users/me`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        about: data.about,\n      })\n    })\n    .then(this._checkRespons);\n  }\n\n  setUserAvatar(data) {\n    return fetch(`${this._baseUrl}users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: data.avatar,\n      })\n    })\n    .then(this._checkRespons);\n  }\n\n  getInitialCards() {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'GET',\n      headers: this._headers,\n    })\n    .then(this._checkRespons);\n  }\n\n  addNewCard(data) {\n    return fetch(`${this._baseUrl}cards`, {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link,\n      })\n    })\n    .then(this._checkRespons);\n  }\n\n  removeCard(cardId) {\n    return fetch(`${this._baseUrl}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this._checkRespons);\n  }\n\n  setlike(cardId) {\n    return fetch(`${this._baseUrl}cards/likes/${cardId}`, {\n      method: 'PUT',\n      headers: this._headers,\n    })\n    .then(this._checkRespons);\n  }\n\n  removeLike(cardId) {\n    return fetch(`${this._baseUrl}cards/likes/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers,\n    })\n    .then(this._checkRespons);\n  }\n\n  _checkRespons(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-25/',\n  headers: {\n    authorization: '61426457-aa06-4805-b055-d8aeddd40fb8',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n\n// мой токен: 61426457-aa06-4805-b055-d8aeddd40fb8\n// идентификатор группы: cohort-25\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json' \n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((response) => {\n    return response.json();\n  })\n  .then((res) => {\n    return res;\n  })\n  .catch((err) => console.log(err))\n}\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json' \n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((response => response.json()))\n  .then((data) => {\n    if (data.token) {\n      localStorage.setItem('jwt', data.token);\n      return data.token;\n    }\n  })\n  .catch((err) => console.log(err))\n}\n\nexport const getContent = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`\n    }\n  })\n  .then(res => res.json())\n  .then(data => data)\n}","import React, { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport DeleteCardPopup from './DeleteCardPoup'; \nimport InfoTooltip from './InfoTooltip';\nimport Login from './Login';\nimport Register from './Register';\nimport ProtectedRoute from './ProtectedRoute';\nimport api from '../utils/api';\nimport * as auth from '../utils/auth';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = useState(false);\n  const [selectCard, setSelectCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegistered, setIsRegistered] = useState(false);\n  const [email, setEmail] = useState('');\n  const history = useHistory();\n\n  //const [isDeletePlacePopupOpen, setIsDeletePlacePopupOpen] = useState(false); \n\n  useEffect(() => {\n    Promise.all([\n      api.getUserInfo(),\n      api.getInitialCards(),\n    ])\n    .then(([userData, cardsData]) => {\n      setCurrentUser(userData);\n      setCards(cardsData);\n    })\n    .catch((error) => {\n      console.log(error);\n    })\n  }, [])\n\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getContent(jwt)\n        .then((res) => {\n          if (res) {\n            setEmail(res.data.email);\n          }\n          setIsLoggedIn(true);\n          history.push('/');\n        })\n        .catch((error) => {\n          console.log(error);\n        })\n    }\n  }, [isLoggedIn, history])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    const changeLikeCardStatus = isLiked? api.removeLike(card._id) : api.setlike(card._id);\n    \n    changeLikeCardStatus.then((newCard) => {\n      setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n    });\n  }\n\n  function handleDeleteCard(card) {\n    api.removeCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  function handleCardClick(card) {\n    setSelectCard({ name: card.name, link: card.link })\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  /*function handleDeletePlaceClick() { временно закроем попап с подтверждением удаления карточки\n    setIsDeletePlacePopupOpen(true); и реализуем удаление карточки напрямую\n  }*/\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    //setIsDeletePlacePopupOpen(false); на время, пока карточка удаляется напрямую \n    setSelectCard({});\n  }\n\n  function handleUpdateUser(data) {\n    api.setUserInfo(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  function handleUpdateAvatar(data) {\n    api.setUserAvatar(data)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  function handleRegistration(email, password) {\n    auth.register(email, password)\n      .then(() => {\n        setIsRegistered(true);\n        handleInfoTooltipOpen();\n        history.push('/sing-in');\n      })\n      .catch((error) => {\n        setIsRegistered(false);\n        handleInfoTooltipOpen();\n        console.log(error);\n      })\n  }\n\n  function handleAuthorization(email, password) {\n    auth.authorize(email, password)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem('jwt', data.token)\n        }\n        setEmail(email);\n        setIsLoggedIn(true);\n        history.push('/');\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n  }\n\n  function handleInfoTooltipOpen() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    history.push('/sign-in');\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header \n          email={email}\n          handleSignOut={handleSignOut}\n        />\n        <Switch>\n          <ProtectedRoute \n            exact path='/'\n            component={Main}\n            isLoggedIn={isLoggedIn}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlaceButtonClick={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onDeleteButtonClick={handleDeleteCard}\n            //onDeleteButtonClick={handleDeletePlaceClick} временно убрала открытые попапа\n            cards={cards}\n          />\n          <Route path='/sign-up'>\n            <Register handleRegistration={handleRegistration} />\n          </Route>\n          <Route path='/sign-in'>\n            <Login handleAuthorization={handleAuthorization} />\n          </Route>\n          <Route path='/'>\n            { !isLoggedIn ? <Redirect to='/sign-in' /> : <Redirect to='/' /> }\n          </Route>\n        </Switch>\n        <InfoTooltip \n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          isRegistered={isRegistered}\n          />\n        <Footer />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <ImagePopup\n          card={selectCard}\n          onClose={closeAllPopups}\n        />\n        <DeleteCardPopup\n          //onClose={closeAllPopups} // закомментила на время пока в доработке\n          //card={selectCard}\n          //onSubmit={handleDeleteCard}\n          //isOpen={isDeletePlacePopupOpen}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}